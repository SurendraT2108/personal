<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Automatic Door – Open/Close Demo</title>
  <style>
    :root{
      --bg:#0f172a;         /* slate-900 */
      --panel:#1f2937;      /* gray-800 */
      --accent:#22d3ee;     /* cyan-400 */
      --accent-2:#34d399;   /* emerald-400 */
      --text:#e5e7eb;       /* gray-200 */
      --warn:#f59e0b;       /* amber-500 */
      --door:#111827;       /* gray-900 */
      --rail:#0ea5e9;       /* sky-500 */
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Inter,Arial,sans-serif;
      background:radial-gradient(80vw 80vh at 50% -10%, #111827, var(--bg));
      color:var(--text);
      display:grid;
      place-items:center;
      min-height:100dvh;
    }

    .app{width:min(920px, 92vw);}
    h1{font-weight:700;letter-spacing:.2px;margin:.5rem 0 1rem;font-size:clamp(1.2rem, 2vw + 1rem, 1.8rem)}
    p.hint{opacity:.8;margin:.25rem 0 1rem}

    /* Control Panel */
    .controls{
      display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;justify-content:space-between;
      background:linear-gradient(180deg, #0b1220, #0a1324 60%);
      border:1px solid #1e2a44;border-radius:14px;padding:.75rem;
      box-shadow:0 10px 30px rgb(0 0 0 / .35), inset 0 1px 0 rgb(255 255 255 / .04);
    }
    .btns{display:flex;flex-wrap:wrap;gap:.5rem}
    button{
      appearance:none;border:0;cursor:pointer;
      padding:.6rem .9rem;border-radius:12px;font-weight:600;
      background:linear-gradient(180deg, #12223c, #0d1b31);
      color:var(--text);border:1px solid #223a63;
      box-shadow:inset 0 1px 0 rgb(255 255 255 / .05), 0 6px 16px rgb(0 0 0 / .3);
      transition:transform .06s ease, filter .2s ease, background .2s ease;
    }
    button:hover{filter:brightness(1.1)}
    button:active{transform:translateY(1px)}
    button.primary{background:linear-gradient(180deg, #0fbad8, #0ea5e9); color:#031018;border-color:#0ea5e9}
    button.success{background:linear-gradient(180deg, #34d399, #10b981); color:#031310;border-color:#10b981}
    button.warn{background:linear-gradient(180deg, #fbbf24, #f59e0b); color:#3a2500;border-color:#f59e0b}
    .tog{display:flex;gap:.5rem;align-items:center}

    /* Door Scene */
    .scene{
      position:relative;margin:1rem 0 0;aspect-ratio:16/7;
      background:linear-gradient(180deg,#0b0f1a 10%, #0f172a);
      border:1px solid #1b2640;border-radius:16px;overflow:hidden;
      box-shadow:inset 0 1px 0 rgb(255 255 255 / .05), 0 30px 80px rgb(0 0 0 / .45);
    }
    .floor{position:absolute;inset:auto 0 0 0;height:35%;background:linear-gradient(0deg,#0b1220, transparent)}

    .frame{
      position:absolute;inset:10% 12%;border-radius:12px;background:var(--panel);
      border:1px solid #2b3a5d;box-shadow:inset 0 2px 10px rgb(0 0 0 / .6);
    }
    .rail{
      position:absolute;left:5%;right:5%;top:14%;height:6px;border-radius:3px;background:var(--rail);
      box-shadow:0 0 14px var(--rail);
    }

    .door{
      position:absolute;inset:18% 12% 18% 12%;
      display:grid;grid-template-columns:1fr 1fr;gap:0;
      overflow:hidden;border-radius:8px;border:1px solid #0b1220;background:#0b1220;
    }

    .panel{
      position:relative;background:linear-gradient(180deg, #0f172a, var(--door));
      border-right:1px solid #0b1220; box-shadow:inset 0 20px 40px rgb(0 0 0 / .6);
      transition:transform .9s cubic-bezier(.2,.8,.2,1);
      will-change:transform;
    }
    .panel.right{border-right:0;border-left:1px solid #0b1220}

    /* Window slit */
    .panel::after{
      content:""; position:absolute; left:18%; right:18%; top:28%; height:26%;
      background:linear-gradient(180deg, #0b1220, #0e1b30);
      border:1px solid #172036; border-radius:6px; box-shadow:inset 0 0 30px rgb(0 0 0 / .6);
    }

    /* Sensor Area */
    .sensor-zone{
      position:absolute; inset:0; pointer-events:auto;
    }
    .beam{
      position:absolute; top:0; left:50%; width:2px; height:100%; transform:translateX(-50%);
      background:repeating-linear-gradient(180deg, transparent 0 16px, rgba(34,211,238,.25) 16px 32px);
      opacity:.0; transition:opacity .3s ease;
    }
    .auto .beam{opacity:1}

    /* Status */
    .status{
      margin:.5rem 0 0; font-size:.95rem; opacity:.9
    }
    .status b{color:var(--accent)}
    .status .auto-on{color:var(--accent-2)}
    .status .auto-off{color:var(--warn)}

    /* OPEN STATE */
    .open .panel.left{ transform:translateX(-100%) }
    .open .panel.right{ transform:translateX(100%) }

    /* Person (for hover/touch demo) */
    .person{position:absolute; bottom:10%; left:6%; width:54px; aspect-ratio:1/1; border-radius:50%;
      background:radial-gradient(circle at 35% 35%, #94a3b8, #334155 60%);
      border:2px solid #1f2937; box-shadow:0 8px 26px rgb(0 0 0 / .45);
      animation:float 4s ease-in-out infinite; pointer-events:none;}
    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}

    /* Accessibility helpers */
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <div class="app">
    <h1>Automatic Sliding Door – Open/Close</h1>
    <p class="hint">Try buttons below, press <kbd>O</kbd> to open, <kbd>C</kbd> to close, or enable <em>Auto Mode</em> then move your mouse/finger into the door area to simulate a proximity sensor.</p>

    <div class="controls" role="toolbar" aria-label="Door controls">
      <div class="btns">
        <button id="openBtn" class="primary" aria-controls="door" aria-label="Open door">Open</button>
        <button id="closeBtn" class="warn" aria-controls="door" aria-label="Close door">Close</button>
        <button id="toggleBtn" aria-controls="door" aria-label="Toggle door">Toggle</button>
        <button id="resetBtn" aria-label="Reset">Reset</button>
      </div>
      <div class="tog">
        <label><input id="autoToggle" type="checkbox" /> Auto Mode (sensor)</label>
        <label style="margin-left:.75rem">Auto-close delay
          <select id="delaySel" aria-label="Auto close delay">
            <option value="1200">1.2s</option>
            <option value="2000" selected>2s</option>
            <option value="3000">3s</option>
            <option value="5000">5s</option>
          </select>
        </label>
      </div>
    </div>

    <div id="scene" class="scene" aria-live="polite">
      <div class="floor"></div>
      <div class="frame">
        <div class="rail"></div>
        <div id="door" class="door" role="group" aria-label="Sliding door">
          <div class="panel left" aria-hidden="true"></div>
          <div class="panel right" aria-hidden="true"></div>
          <div class="sensor-zone" id="sensorZone" aria-hidden="true">
            <div class="beam"></div>
            <span class="sr-only">Sensor zone</span>
          </div>
        </div>
      </div>
      <div class="person" aria-hidden="true" title="Approaching person"></div>
    </div>

    <p id="status" class="status">Status: <b>Closed</b> • Mode: <span class="auto-off">Manual</span></p>
  </div>

  <script>
    const app = document.querySelector('.app');
    const door = document.getElementById('door');
    const scene = document.getElementById('scene');
    const sensorZone = document.getElementById('sensorZone');
    const statusEl = document.getElementById('status');

    const openBtn = document.getElementById('openBtn');
    const closeBtn = document.getElementById('closeBtn');
    const toggleBtn = document.getElementById('toggleBtn');
    const resetBtn = document.getElementById('resetBtn');
    const autoToggle = document.getElementById('autoToggle');
    const delaySel = document.getElementById('delaySel');

    let isOpen = false;
    let auto = false;
    let closeTimer = null;

    function setOpen(open){
      isOpen = !!open;
      door.classList.toggle('open', isOpen);
      updateStatus();
    }

    function updateStatus(){
      const s1 = isOpen ? 'Open' : 'Closed';
      const s2 = auto ? '<span class="auto-on">Auto</span>' : '<span class="auto-off">Manual</span>';
      statusEl.innerHTML = `Status: <b>${s1}</b> • Mode: ${s2}`;
    }

    function scheduleClose(){
      clearTimeout(closeTimer);
      closeTimer = setTimeout(()=> setOpen(false), Number(delaySel.value));
    }

    // Button events
    openBtn.addEventListener('click', ()=> setOpen(true));
    closeBtn.addEventListener('click', ()=> setOpen(false));
    toggleBtn.addEventListener('click', ()=> setOpen(!isOpen));
    resetBtn.addEventListener('click', ()=> { setOpen(false); app.classList.remove('auto'); autoToggle.checked=false; auto=false; updateStatus(); });

    // Auto mode toggle
    autoToggle.addEventListener('change', (e)=>{
      auto = e.target.checked;
      app.classList.toggle('auto', auto);
      updateStatus();
    });

    // Sensor behavior (mouse/touch enter -> open; leave -> delay then close)
    sensorZone.addEventListener('mouseenter', ()=>{ if(auto){ setOpen(true); clearTimeout(closeTimer); }});
    sensorZone.addEventListener('mouseleave', ()=>{ if(auto){ scheduleClose(); }});
    // Touch devices: treat touchstart as enter, end as leave
    sensorZone.addEventListener('touchstart', ()=>{ if(auto){ setOpen(true); clearTimeout(closeTimer); }}, {passive:true});
    sensorZone.addEventListener('touchend', ()=>{ if(auto){ scheduleClose(); }}, {passive:true});

    // Keyboard shortcuts
    window.addEventListener('keydown', (e)=>{
      if(['INPUT','SELECT','TEXTAREA'].includes(document.activeElement.tagName)) return;
      if(e.key==='o' || e.key==='O'){ setOpen(true); }
      if(e.key==='c' || e.key==='C'){ setOpen(false); }
      if(e.code==='Space'){ e.preventDefault(); setOpen(!isOpen); }
      if(e.key==='a' || e.key==='A'){ autoToggle.checked = !autoToggle.checked; auto = autoToggle.checked; app.classList.toggle('auto', auto); updateStatus(); }
    });

    // Initialize
    updateStatus();
  </script>
</body>
</html>
